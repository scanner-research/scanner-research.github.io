<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Scanner C++ API: scanner::BaseKernel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Scanner C++ API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>scanner</b></li><li class="navelem"><a class="el" href="classscanner_1_1BaseKernel.html">BaseKernel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classscanner_1_1BaseKernel-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">scanner::BaseKernel Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Interface for a unit of computation in a pipeline.  
 <a href="classscanner_1_1BaseKernel.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="kernel_8h_source.html">kernel.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for scanner::BaseKernel:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classscanner_1_1BaseKernel.png" usemap="#scanner::BaseKernel_map" alt=""/>
  <map id="scanner::BaseKernel_map" name="scanner::BaseKernel_map">
<area href="classscanner_1_1BatchedKernel.html" title="Interface for a unit of computation in a pipeline. " alt="scanner::BatchedKernel" shape="rect" coords="418,56,617,80"/>
<area href="classscanner_1_1Kernel.html" alt="scanner::Kernel" shape="rect" coords="1045,56,1244,80"/>
<area href="classscanner_1_1StenciledBatchedKernel.html" title="Interface for a unit of computation in a pipeline. " alt="scanner::StenciledBatchedKernel" shape="rect" coords="1254,56,1453,80"/>
<area href="classscanner_1_1StenciledKernel.html" alt="scanner::StenciledKernel" shape="rect" coords="1463,56,1662,80"/>
<area href="classscanner_1_1ImageEncoderKernel.html" alt="scanner::ImageEncoderKernel" shape="rect" coords="0,112,199,136"/>
<area href="classscanner_1_1SampleKernel.html" alt="scanner::SampleKernel" shape="rect" coords="209,112,408,136"/>
<area href="classscanner_1_1SliceKernel.html" alt="scanner::SliceKernel" shape="rect" coords="418,112,617,136"/>
<area href="classscanner_1_1SpaceKernel.html" alt="scanner::SpaceKernel" shape="rect" coords="627,112,826,136"/>
<area href="classscanner_1_1UnsliceKernel.html" alt="scanner::UnsliceKernel" shape="rect" coords="836,112,1035,136"/>
<area href="classscanner_1_1SampleKernel.html" alt="scanner::SampleKernel" shape="rect" coords="1045,112,1244,136"/>
<area href="classscanner_1_1PythonKernel.html" alt="scanner::PythonKernel" shape="rect" coords="1254,112,1453,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a212f652373c4c2609d501258007b2a12"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a212f652373c4c2609d501258007b2a12"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BaseKernel</b> (const <a class="el" href="structscanner_1_1KernelConfig.html">KernelConfig</a> &amp;config)</td></tr>
<tr class="separator:a212f652373c4c2609d501258007b2a12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6ef0afd37643a03bbbe1bdc6228ab91"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1BaseKernel.html#ad6ef0afd37643a03bbbe1bdc6228ab91">validate</a> (proto::Result *result)</td></tr>
<tr class="memdesc:ad6ef0afd37643a03bbbe1bdc6228ab91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if kernel arguments are valid.  <a href="#ad6ef0afd37643a03bbbe1bdc6228ab91">More...</a><br /></td></tr>
<tr class="separator:ad6ef0afd37643a03bbbe1bdc6228ab91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5031be94a5ec654a77b3588b3a632b21"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1BaseKernel.html#a5031be94a5ec654a77b3588b3a632b21">fetch_resources</a> (proto::Result *result)</td></tr>
<tr class="memdesc:a5031be94a5ec654a77b3588b3a632b21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Downloads any resources necessary for the kernel to run.  <a href="#a5031be94a5ec654a77b3588b3a632b21">More...</a><br /></td></tr>
<tr class="separator:a5031be94a5ec654a77b3588b3a632b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1fa795076e6b0ad6063c45ea0910fd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1BaseKernel.html#a8a1fa795076e6b0ad6063c45ea0910fd">setup_with_resources</a> (proto::Result *result)</td></tr>
<tr class="memdesc:a8a1fa795076e6b0ad6063c45ea0910fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs any setup code that relies on fetched resources.  <a href="#a8a1fa795076e6b0ad6063c45ea0910fd">More...</a><br /></td></tr>
<tr class="separator:a8a1fa795076e6b0ad6063c45ea0910fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52eff8863eb79ca36c59957c8d8972f8"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1BaseKernel.html#a52eff8863eb79ca36c59957c8d8972f8">new_stream</a> (const std::vector&lt; u8 &gt; &amp;args)</td></tr>
<tr class="memdesc:a52eff8863eb79ca36c59957c8d8972f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the <a class="el" href="classscanner_1_1Kernel.html">Kernel</a> is about to process a new stream.  <a href="#a52eff8863eb79ca36c59957c8d8972f8">More...</a><br /></td></tr>
<tr class="separator:a52eff8863eb79ca36c59957c8d8972f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17652872d8ffcaa778c73a40195429a2"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1BaseKernel.html#a17652872d8ffcaa778c73a40195429a2">reset</a> ()</td></tr>
<tr class="memdesc:a17652872d8ffcaa778c73a40195429a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests that kernel resets its logical state.  <a href="#a17652872d8ffcaa778c73a40195429a2">More...</a><br /></td></tr>
<tr class="separator:a17652872d8ffcaa778c73a40195429a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97b6577cb9b5b23169e800c757d27bb4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a97b6577cb9b5b23169e800c757d27bb4"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1BaseKernel.html#a97b6577cb9b5b23169e800c757d27bb4">execute_kernel</a> (const StenciledBatchedElements &amp;input_columns, BatchedElements &amp;output_columns)=0</td></tr>
<tr class="memdesc:a97b6577cb9b5b23169e800c757d27bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal use. <br /></td></tr>
<tr class="separator:a97b6577cb9b5b23169e800c757d27bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5915a3fc1e918d5b49e57302902d8cea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5915a3fc1e918d5b49e57302902d8cea"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1BaseKernel.html#a5915a3fc1e918d5b49e57302902d8cea">set_profiler</a> (<a class="el" href="classscanner_1_1Profiler.html">Profiler</a> *profiler)</td></tr>
<tr class="memdesc:a5915a3fc1e918d5b49e57302902d8cea"><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal use. <br /></td></tr>
<tr class="separator:a5915a3fc1e918d5b49e57302902d8cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ad01a16f12b895ccc3375f82ccd391876"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classscanner_1_1Profiler.html">Profiler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1BaseKernel.html#ad01a16f12b895ccc3375f82ccd391876">profiler_</a> = nullptr</td></tr>
<tr class="separator:ad01a16f12b895ccc3375f82ccd391876"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ae06b82061136181502cf8f1b5d8a6b28"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae06b82061136181502cf8f1b5d8a6b28"></a>
static const i32&#160;</td><td class="memItemRight" valign="bottom"><b>UnlimitedDevices</b> = 0</td></tr>
<tr class="separator:ae06b82061136181502cf8f1b5d8a6b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface for a unit of computation in a pipeline. </p>
<p>Kernels form the core of Scanner's interface. They are essentially functions that take elements of inputs and produce an equal number elements of outputs. Kernels are stateful operators that get reset when provided non-contiguous batches of input. See KernelFactory for how an op defines what hardware it can use for its computation. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a5031be94a5ec654a77b3588b3a632b21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void scanner::BaseKernel::fetch_resources </td>
          <td>(</td>
          <td class="paramtype">proto::Result *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Downloads any resources necessary for the kernel to run. </p>
<p>For a given kernel, only run once per worker. </p>

<p>Reimplemented in <a class="el" href="classscanner_1_1PythonKernel.html#a2b89979cdc83abd8738dbb7a7821ddc1">scanner::PythonKernel</a>.</p>

</div>
</div>
<a class="anchor" id="a52eff8863eb79ca36c59957c8d8972f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void scanner::BaseKernel::new_stream </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; u8 &gt; &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the <a class="el" href="classscanner_1_1Kernel.html">Kernel</a> is about to process a new stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>the arguments that were bound to this Op for this stream </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classscanner_1_1PythonKernel.html#a4c0e379995733b6d16af392ce78e2226">scanner::PythonKernel</a>.</p>

</div>
</div>
<a class="anchor" id="a17652872d8ffcaa778c73a40195429a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void scanner::BaseKernel::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Requests that kernel resets its logical state. </p>
<p>Scanner calls reset on a kernel when it provides non-consecutive inputs or when about to provide inputs from a difference slice. This allows unbounded or bounded state kernels to clear their logical state so that state from logically unrelated parts of the input do not affect the output. </p>

<p>Reimplemented in <a class="el" href="classscanner_1_1PythonKernel.html#aed123b4a7e97696a20e8fac31aee6c4f">scanner::PythonKernel</a>.</p>

</div>
</div>
<a class="anchor" id="a8a1fa795076e6b0ad6063c45ea0910fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void scanner::BaseKernel::setup_with_resources </td>
          <td>(</td>
          <td class="paramtype">proto::Result *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runs any setup code that relies on fetched resources. </p>
<p>Guaranteed to be called on all kernels after fetch_resources is called on one kernel. </p>

<p>Reimplemented in <a class="el" href="classscanner_1_1PythonKernel.html#a98d17e9a984767fbcd4bb5b5761fa0f8">scanner::PythonKernel</a>.</p>

</div>
</div>
<a class="anchor" id="ad6ef0afd37643a03bbbe1bdc6228ab91"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void scanner::BaseKernel::validate </td>
          <td>(</td>
          <td class="paramtype">proto::Result *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if kernel arguments are valid. </p>
<p>Only useful if your kernel has its own custom Protobuf arguments. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ad01a16f12b895ccc3375f82ccd391876"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classscanner_1_1Profiler.html">Profiler</a>* scanner::BaseKernel::profiler_ = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The profiler allows an op to save profiling data for later visualization. It is not guaranteed to be non-null, so check before use. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>scanner/api/<a class="el" href="kernel_8h_source.html">kernel.h</a></li>
<li>scanner/api/kernel.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
